/*! jquery-fracs v1.0.2 - https://larsjung.de/jquery-fracs/ */
"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(){function r(t,n){return _typeof(t)===n}function s(t,n){return t instanceof n}function l(t){return t&&t.nodeType}function h(t){return l(t)?t:s(t,c)?t[0]:void 0}function n(t,n,e){if(t===n)return!0;if(!t||!n||t.constructor!==n.constructor)return!1;for(var i=0,o=e.length;i<o;i+=1){var r=e[i];if(t[r]&&v(t[r].equals)&&!t[r].equals(n[r]))return!1;if(t[r]!==n[r])return!1}return!0}var e,i,o=window,u=o.document,c=o.jQuery,f=c(o),a=c(u),p=c.extend,v=c.isFunction,d=Math.max,w=Math.min,b=Math.round,m=(e={},i=1,function(t){return t?(e[t]||(e[t]=i,i+=1),e[t]):0});function g(t,n,e,i){this.left=b(t),this.top=b(n),this.width=b(e),this.height=b(i),this.right=this.left+this.width,this.bottom=this.top+this.height}function y(t,n,e,i){this.visible=t||0,this.viewport=n||0,this.possible=e||0,this.rects=i&&p({},i)||null}function T(t,n){this.els=t,this.viewport=n}p(g.prototype,{equals:function(t){return n(this,t,["left","top","width","height"])},area:function(){return this.width*this.height},relativeTo:function(t){return new g(this.left-t.left,this.top-t.top,this.width,this.height)},intersection:function(t){if(!s(t,g))return null;var n=d(this.left,t.left),e=w(this.right,t.right),i=d(this.top,t.top),o=e-n,r=w(this.bottom,t.bottom)-i;return 0<=o&&0<=r?new g(n,i,o,r):null},envelope:function(t){if(!s(t,g))return this;var n=w(this.left,t.left),e=d(this.right,t.right),i=w(this.top,t.top);return new g(n,i,e-n,d(this.bottom,t.bottom)-i)}}),p(g,{ofContent:function(t,n){return t&&t!==u&&t!==o?n?new g(0,0,t.scrollWidth,t.scrollHeight):new g(t.offsetLeft-t.scrollLeft,t.offsetTop-t.scrollTop,t.scrollWidth,t.scrollHeight):new g(0,0,a.width(),a.height())},ofViewport:function(t,n){return t&&t!==u&&t!==o?n?new g(t.scrollLeft,t.scrollTop,t.clientWidth,t.clientHeight):new g(t.offsetLeft,t.offsetTop,t.clientWidth,t.clientHeight):new g(f.scrollLeft(),f.scrollTop(),f.width(),f.height())},ofElement:function(t){var n=c(t);if(!n.is(":visible"))return null;var e=n.offset();return new g(e.left,e.top,n.outerWidth(),n.outerHeight())}}),p(y.prototype,{equals:function(t){return this.fracsEqual(t)&&this.rectsEqual(t)},fracsEqual:function(t){return n(this,t,["visible","viewport","possible"])},rectsEqual:function(t){return n(this.rects,t.rects,["document","element","viewport"])}}),p(y,{of:function(t,n){if(t=l(t)&&g.ofElement(t)||t,n=l(n)&&g.ofViewport(n)||n||g.ofViewport(),!s(t,g))return new y;var e=t.intersection(n);if(!e)return new y;var i=e.area(),o=w(t.width,n.width)*w(t.height,n.height);return new y(i/t.area(),i/n.area(),i/o,{document:e,element:e.relativeTo(t),viewport:e.relativeTo(n)})}});function k(t,n){return t.val-n.val}function S(t,n){return n.val-t.val}var E=["width","height","left","right","top","bottom"],_=["possible","visible","viewport"];function q(t){var n=g.ofContent(t,!0),e=g.ofViewport(t,!0),i=n.width-e.width,o=n.height-e.height;this.content=n,this.viewport=e,this.width=i<=0?null:e.left/i,this.height=o<=0?null:e.top/o,this.left=e.left,this.top=e.top,this.right=n.right-e.right,this.bottom=n.bottom-e.bottom}function x(t){this.el=t||o}p(T.prototype,{sorted:function(r,t){var s=this.viewport;return c.map(this.els,function(t){return{el:t,val:(n=t,e=s,i=r,E.includes(i)?o=g.ofElement(n):_.includes(i)&&(o=y.of(n,e)),o?o[i]:0)};var n,e,i,o}).sort(t?S:k)},best:function(t,n){return this.els.length?this.sorted(t,n)[0]:null}}),p(q.prototype,{equals:function(t){return n(this,t,["width","height","left","top","right","bottom","content","viewport"])}}),p(x.prototype,{equals:function(t){return n(this,t,["el"])},scrollState:function(){return new q(this.el)},scrollTo:function(t,n,e){var i=this.el===o?c("html,body"):c(this.el);t=t||0,n=n||0,e=isNaN(e)?1e3:e,i.stop(!0).animate({scrollLeft:t,scrollTop:n},e)},scrollToRect:function(t,n,e,i){n=n||0,e=e||0,this.scrollTo(t.left-n,t.top-e,i)},scrollToElement:function(t,n,e,i){var o=g.ofElement(t).relativeTo(g.ofContent(this.el));this.scrollToRect(o,n,e,i)}});var t={context:null,updatedValue:function(){return null},init:function(t){this.callbacks=c.Callbacks("memory unique"),this.curr_val=null,this.prev_val=null,c(t||o).on("load resize scroll",c.proxy(this.check,this))},bind:function(t){this.callbacks.add(t)},unbind:function(t){t?this.callbacks.remove(t):this.callbacks.empty()},check:function(t){var n=this.updatedValue(t);return void 0!==n&&(this.prev_val=this.curr_val,this.curr_val=n,this.callbacks.fireWith(this.context,[this.curr_val,this.prev_val]),!0)}};function V(t,n){this.context=t,this.viewport=n,this.init()}function C(t,n,e,i){this.context=new T(t,n),this.property=e,this.descending=i,this.init()}function L(t){this.context=t&&t!==o&&t!==u?t:o,this.init(this.context)}p(V.prototype,t,{updatedValue:function(){var t=y.of(this.context,this.viewport);if(!t.equals(this.curr_val))return t}}),p(C.prototype,t,{updatedValue:function(){var t=this.context.best(this.property,this.descending);if(t&&(t=0<t.val?t.el:null,this.curr_val!==t))return t}}),p(L.prototype,t,{updatedValue:function(){var t=new q(this.context);if(!t.equals(this.curr_val))return t}});var W={content:function(t){return this.length?g.ofContent(this[0],t):null},envelope:function(){var i;return c.each(this,function(t,n){var e=g.ofElement(n);i=i?i.envelope(e):e}),i},fracs:function(t,e,i){r(t,"string")||(i=e,e=t,t=null),v(e)||(i=e,e=null),i=h(i);var o="fracs."+m(i);return"unbind"===t?this.each(function(){var t=c(this).data(o);t&&t.unbind(e)}):"check"===t?this.each(function(){var t=c(this).data(o);t&&t.check()}):v(e)?this.each(function(){var t=c(this),n=t.data(o);n||(n=new V(this,i),t.data(o,n)),n.bind(e)}):this.length?y.of(this[0],i):null},intersection:function(){var i;return c.each(this,function(t,n){var e=g.ofElement(n);i=i?i.intersection(e):e}),i},max:function(t,n,e){return v(n)||(e=n,n=null),e=h(e),n?(new C(this,e,t,!0).bind(n),this):this.pushStack(new T(this,e).best(t,!0).el)},min:function(t,n,e){return v(n)||(e=n,n=null),e=h(e),n?(new C(this,e,t).bind(n),this):this.pushStack(new T(this,e).best(t).el)},rect:function(){return this.length?g.ofElement(this[0]):null},scrollState:function(t,e){var i="fracs.scrollState";return r(t,"string")||(e=t,t=null),"unbind"===t?this.each(function(){var t=c(this).data(i);t&&t.unbind(e)}):"check"===t?this.each(function(){var t=c(this).data(i);t&&t.check()}):v(e)?this.each(function(){var t=c(this),n=t.data(i);n||(n=new L(this),t.data(i,n)),n.bind(e)}):this.length?new q(this[0]):null},scroll:function(t,n,e){return this.each(function(){new x(this).scroll(t,n,e)})},scrollTo:function(t,n,e,i){return c.isNumeric(t)&&(i=e,e=n,n=t,t=null),t=h(t),this.each(function(){t?new x(this).scrollToElement(t,n,e,i):new x(this).scrollTo(n,e,i)})},scrollToThis:function(t,n,e,i){return(i=new x(h(i))).scrollToElement(this[0],t,n,e),this},sort:function(t,n,e){return r(n,"boolean")||(e=n,n=null),e=h(e),this.pushStack(c.map(new T(this,e).sorted(t,!n),function(t){return t.el}))},viewport:function(t){return this.length?g.ofViewport(this[0],t):null}};c.fracs=function(t,n){return y.of(t,n)},c.fracs._={Rect:g,Fractions:y,Group:T,ScrollState:q,Viewport:x,FracsCallbacks:V,GroupCallbacks:C,ScrollStateCallbacks:L},c.fn.fracs=function(){for(var t=W.fracs,n=arguments.length,e=new Array(n),i=0;i<n;i++)e[i]=arguments[i];return v(W[e[0]])&&(t=W[e.shift()]),Reflect.apply(t,this,e)}}();